# Stripeキー設定ガイド

## 📝 Stripeテストキーの取得方法

### 1. Stripeアカウント作成
1. [Stripe](https://stripe.com/jp)にアクセス
2. 「今すぐ始める」をクリックしてアカウント作成

### 2. テストキーの取得
1. [Stripe Dashboard](https://dashboard.stripe.com)にログイン
2. 右上の「テスト環境」スイッチがONになっていることを確認
3. 左メニューの「開発者」→「APIキー」をクリック
4. 以下の2つのキーをコピー：
   - **公開可能キー**: `pk_test_` で始まる文字列
   - **シークレットキー**: `sk_test_` で始まる文字列（「シークレットキーを表示」をクリック）

### 3. .env.localファイルの設定

`.env.local`ファイルを開いて、コピーしたキーを貼り付けます：

```env
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_51O...（あなたの公開可能キー）
STRIPE_SECRET_KEY=sk_test_51O...（あなたのシークレットキー）
NEXT_PUBLIC_APP_URL=http://localhost:3004
```

⚠️ **重要**: 
- `pk_test_あなたの公開可能キー` の部分を実際のキーに置き換えてください
- `sk_test_あなたのシークレットキー` の部分を実際のキーに置き換えてください
- キーは必ず `pk_test_` と `sk_test_` で始まります

### 4. サーバー再起動

.env.localを変更したら、開発サーバーを再起動：

```bash
# Ctrl+C で停止後
npm run dev
```

## 🔍 トラブルシューティング

### エラー: "Stripeキーが設定されていません"
→ .env.localファイルのキーが正しく設定されているか確認

### エラー: "No such token"
→ シークレットキーが正しくコピーされているか確認

### エラー: "Invalid API Key provided"
→ テスト環境のキーを使用しているか確認（`pk_test_`と`sk_test_`で始まる）

## 📱 テスト決済の方法

キー設定後、以下のテストカードで決済を試せます：

- **カード番号**: 4242 4242 4242 4242
- **有効期限**: 任意の将来の日付（例: 12/25）
- **CVC**: 任意の3桁（例: 123）
- **郵便番号**: 任意の5桁（例: 12345）

## 🔒 セキュリティ注意事項

- **シークレットキーは絶対に公開しないでください**
- GitHubにpushする際は.env.localが.gitignoreに含まれていることを確認
- 本番環境では必ず本番用のキー（`pk_live_`と`sk_live_`）を使用